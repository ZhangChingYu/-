(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my-info/info"],{253:function(e,t,n){"use strict";(function(e){n(5);a(n(4));var t=a(n(254));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},254:function(e,t,n){"use strict";n.r(t);var a=n(255),r=n(257);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n(259);var s,i=n(11),u=Object(i["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"047bf487",null,!1,a["components"],s);u.options.__file="pages/my-info/info.vue",t["default"]=u.exports},255:function(e,t,n){"use strict";n.r(t);var a=n(256);n.d(t,"render",(function(){return a["render"]})),n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(t,"components",(function(){return a["components"]}))},256:function(e,t,n){"use strict";var a;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return a}));var r=function(){var e=this,t=e.$createElement;e._self._c},o=!1,s=[];r._withStripped=!0},257:function(e,t,n){"use strict";n.r(t);var a=n(258),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},258:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{userUpdate:{violationCount:"",userName:"",realName:"",email:"",stuNum:"",phone:""},user:{},avatar:"",grade:""}},mounted:function(){var t=this,n=e.getStorageSync("user");this.user=n,this.userUpdate=n;var a=this,r=this.user.phone;a.api.get("/seller/grade",{phone:r}).then((function(e){t.grade=e})),this.avatar=e.getStorageSync("avatar")},methods:{onGetImgClick:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){console.log("chooseImage-----》》》》》》》》",n);var a=n.tempFilePaths[0].split("."),r=a[1].toLowerCase();"png"==r||"jpg"===r||"jpeg"===r?(console.log(n.tempFiles,"beforre--------"),n.tempFiles[0]["size"]>20971520?e.showToast({title:"图片大小不能超过20M",icon:"none",duration:3e3}):n.tempFiles[0]["size"]<5242880?(console.log(n.tempFilePaths[0],"imginfo"),t.avatar=n.tempFilePaths[0],t.uploadImgFile(n.tempFilePaths[0],t),e.setStorage({key:"avatar",data:t.avatar})):e.compressImage({src:n.tempFilePaths[0],quality:80,success:function(n){console.log(n,"=========res"),t.uploadImgFile(n.tempFilePath,t),e.setStorage({key:"avatar",data:t.avatar})}})):e.showToast({title:"请上传PNG、JPG、JPEG格式的图片",icon:"none",duration:3e3})}})},uploadImgFile:function(t,n){e.uploadFile({url:"http://localhost:8080//setting/swapRelatedAvatar",filePath:t,name:"avatar",formData:{avatar:t,phone:this.user.phone},header:{"Content-Type":"multipart/form-data",token:e.getStorageSync("token")},success:function(e){var t=JSON.parse(e.data);console.log(t,"----res"),200==t.code&&(n.showInfo=t.data,console.log("请求成功_______________",t))},fail:function(e){console.log("请求失败_______________",e)}})},commit:function(){var t=this;t.api.post("/setting/edit",t.user).then((function(e){console.log(e)})),this.user=this.userUpdate,e.setStorage({key:"user",data:this.user}),this.$toast("更新成功!");var n=getCurrentPages(),a=(n[n.length-1],n[n.length-2]);a.$vm.user.userName=this.user.userName,a.$vm.avatar=this.avatar,e.navigateBack({delta:1})},changePass:function(){e.navigateTo({url:"/pages/findback/findback"})}}};t.default=n}).call(this,n(1)["default"])},259:function(e,t,n){"use strict";n.r(t);var a=n(260),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},260:function(e,t,n){}},[[253,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my-info/info.js.map