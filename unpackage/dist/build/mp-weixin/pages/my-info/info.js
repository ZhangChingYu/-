(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my-info/info"],{1803:function(e,t,a){"use strict";(function(e){a("df27");n(a("66fd"));var t=n(a("90bc"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t.default)}).call(this,a("543d")["createPage"])},"20e4":function(e,t,a){"use strict";var n=a("c1ee"),o=a.n(n);o.a},"8a23":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{userUpdate:{violationCount:"",userName:"",realName:"",email:"",stuNum:"",phone:""},user:{},avatar:"",grade:""}},mounted:function(){var t=this,a=e.getStorageSync("user");this.user=a,this.userUpdate=a;var n=this,o=this.user.phone;n.api.get("/seller/grade",{phone:o}).then((function(e){t.grade=e})),this.avatar=e.getStorageSync("avatar")},methods:{onGetImgClick:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){console.log("chooseImage-----》》》》》》》》",a);var n=a.tempFilePaths[0].split("."),o=n[1].toLowerCase();"png"==o||"jpg"===o||"jpeg"===o?(console.log(a.tempFiles,"beforre--------"),a.tempFiles[0]["size"]>20971520?e.showToast({title:"图片大小不能超过20M",icon:"none",duration:3e3}):a.tempFiles[0]["size"]<5242880?(console.log(a.tempFilePaths[0],"imginfo"),t.avatar=a.tempFilePaths[0],t.uploadImgFile(a.tempFilePaths[0],t),e.setStorage({key:"avatar",data:t.avatar})):e.compressImage({src:a.tempFilePaths[0],quality:80,success:function(a){console.log(a,"=========res"),t.uploadImgFile(a.tempFilePath,t),e.setStorage({key:"avatar",data:t.avatar})}})):e.showToast({title:"请上传PNG、JPG、JPEG格式的图片",icon:"none",duration:3e3})}})},uploadImgFile:function(t,a){e.uploadFile({url:"http://localhost:8080//setting/swapRelatedAvatar",filePath:t,name:"avatar",formData:{avatar:t,phone:this.user.phone},header:{"Content-Type":"multipart/form-data",token:e.getStorageSync("token")},success:function(e){var t=JSON.parse(e.data);console.log(t,"----res"),200==t.code&&(a.showInfo=t.data,console.log("请求成功_______________",t))},fail:function(e){console.log("请求失败_______________",e)}})},commit:function(){var t=this;t.api.post("/setting/edit",t.user).then((function(e){console.log(e)})),this.user=this.userUpdate,e.setStorage({key:"user",data:this.user}),this.$toast("更新成功!");var a=getCurrentPages(),n=(a[a.length-1],a[a.length-2]);n.$vm.user.userName=this.user.userName,n.$vm.avatar=this.avatar,e.navigateBack({delta:1})},changePass:function(){e.navigateTo({url:"/pages/findback/findback"})}}};t.default=a}).call(this,a("543d")["default"])},"8b32":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}));var o=function(){var e=this,t=e.$createElement;e._self._c},s=[]},"90bc":function(e,t,a){"use strict";a.r(t);var n=a("8b32"),o=a("d2ee");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("20e4");var r,i=a("f0c5"),u=Object(i["a"])(o["default"],n["b"],n["c"],!1,null,"c9a0518c",null,!1,n["a"],r);t["default"]=u.exports},c1ee:function(e,t,a){},d2ee:function(e,t,a){"use strict";a.r(t);var n=a("8a23"),o=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=o.a}},[["1803","common/runtime","common/vendor"]]]);